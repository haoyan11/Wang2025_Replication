# Wang2025å¤ç°åˆ†æ - æ•°æ®é…ç½®è¯´æ˜

## ğŸ“Š å½“å‰æ•°æ®é…ç½®æ€»ç»“

æ ¹æ®æ‚¨çš„ç‰©å€™åˆ†æä»£ç ï¼Œå·²ä¸ºæ‚¨é…ç½®å¥½æ‰€æœ‰æ•°æ®è·¯å¾„ã€‚

---

## 1. æ•°æ®è·¯å¾„é…ç½®

### 1.1 è’¸è…¾æ•°æ®ï¼ˆTRï¼‰- ERA5-Land

**è·¯å¾„**: `I:\F\Data4\Meteorological Data\ERA5_Land\ET_components\ET_transp\ET_transp_Daily\ET_transp_Daily_2`

**æ–‡ä»¶æ ¼å¼**: `ERA5L_ET_transp_Daily_mm_YYYYMMDD.tif`

**ç¤ºä¾‹**:
- `ERA5L_ET_transp_Daily_mm_19820101.tif`
- `ERA5L_ET_transp_Daily_mm_20001231.tif`

**æ•°æ®æ¥æº**: æ‚¨çš„ç‰©å€™åˆ†æä»£ç ä¸­çš„Tæ•°æ®è·¯å¾„

---

### 1.2 åœŸå£¤æ°´åˆ†ï¼ˆSMï¼‰- GLEAM

#### âœ… æ¨èï¼šæ·±å±‚åœŸå£¤æ°´åˆ†ï¼ˆSMrzï¼‰

**è·¯å¾„**: `I:\F\Data4\Meteorological Data\GLEAM\SMrz\SMrz_Daily`

**æ–‡ä»¶æ ¼å¼**: `SMrz_YYYYMMDD.tif` â­ **æ—¥å°ºåº¦**

**ç¤ºä¾‹**:
- `SMrz_19820101.tif` (1982å¹´1æœˆ1æ—¥)
- `SMrz_20001215.tif` (2000å¹´12æœˆ15æ—¥)

**ä¼˜åŠ¿**: æ—¥å°ºåº¦æ•°æ®æ¯”æœˆå°ºåº¦æ›´ç²¾ç¡®ï¼Œå¯ä»¥æ•æ‰çŸ­æœŸåœŸå£¤æ°´åˆ†å˜åŒ–

#### å¤‡é€‰ï¼šè¡¨å±‚åœŸå£¤æ°´åˆ†ï¼ˆSMsï¼‰

**è·¯å¾„**: `I:\F\Data4\Meteorological Data\GLEAM\SMs\SMs_Daily`

**æ–‡ä»¶æ ¼å¼**: `SMs_YYYYMMDD.tif` (æ—¥å°ºåº¦)

**ä¸ºä»€ä¹ˆæ¨èæ·±å±‚ï¼ˆSMrzï¼‰ï¼Ÿ**

| æŒ‡æ ‡ | æ·±å±‚ï¼ˆSMrzï¼‰ | è¡¨å±‚ï¼ˆSMsï¼‰ |
|-----|-------------|------------|
| **ç‰©ç†å…³ç³»** | â­â­â­â­â­ ä¸æ¤ç‰©è’¸è…¾ç›´æ¥ç›¸å…³ | â­â­â­ å—åœŸå£¤è’¸å‘å½±å“æ›´å¤§ |
| **æ—¶é—´æ»å** | â­â­â­â­ å˜åŒ–ç¼“æ…¢ï¼Œä»£è¡¨åœŸå£¤æ°´åˆ†å‚¨å­˜ | â­â­ å“åº”å¿«ï¼Œæ—¥å˜åŒ–å¤§ |
| **ä¸æ£®æ—å…³ç³»** | â­â­â­â­â­ æ£®æ—æ ¹ç³»æ·±ï¼Œä¾èµ–æ·±å±‚æ°´åˆ† | â­â­â­ ä¸»è¦å½±å“åœ°è¡¨è’¸å‘ |
| **Wangè®ºæ–‡ä¸€è‡´** | â­â­â­â­â­ è®ºæ–‡ä½¿ç”¨æ ¹åŒºåœŸå£¤æ°´åˆ† | â­â­ ä¸ç¬¦åˆåŸæ–‡ |
| **å­¦æœ¯è®¤å¯åº¦** | â­â­â­â­â­ æ ‡å‡†åšæ³• | â­â­â­ è¾ƒå°‘ä½¿ç”¨ |

**ç»“è®º**: **ä¼˜å…ˆä½¿ç”¨SMrzï¼ˆæ·±å±‚ï¼‰**ï¼Œé™¤éç ”ç©¶æ˜ç¡®å…³æ³¨è¡¨å±‚è¿‡ç¨‹ã€‚

---

### 1.3 GPPæ•°æ®

#### æ—¥å°ºåº¦GPPï¼ˆæ¨èç”¨äºWang2025åˆ†æï¼‰

**è·¯å¾„**: `I:\F\Data4\GLASS_GPP\GLASS_GPP_daily_interpolated`

**æ–‡ä»¶æ ¼å¼**: `GPP_YYYYMMDD.tif`

**ç¤ºä¾‹**:
- `GPP_19820101.tif`
- `GPP_20001231.tif`

**ç‰¹ç‚¹**: å·²ä»8å¤©æ’å€¼åˆ°æ—¥å°ºåº¦ï¼Œé€‚åˆé€æ—¥ç´¯åŠ è®¡ç®—

#### 8å¤©æ•°æ®GPPï¼ˆç‰©å€™ä»£ç ä½¿ç”¨ï¼‰

**è·¯å¾„**: `I:\F\Data4\GLASS_GPP\GLASS_GPP_8days_1`

**æ–‡ä»¶æ ¼å¼**: `GLASS_GPP_YYYYDDD.tif` æˆ– `GLASS_YYYYDDD.tif`

**ç¤ºä¾‹**:
- `GLASS_GPP_2000001.tif` (2000å¹´ç¬¬1å¤©)
- `GLASS_2000365.tif` (2000å¹´ç¬¬365å¤©)

**ç”¨é€”**: ä»…ç”¨äºæå–ç‰©å€™ï¼Œä¸ç”¨äºWang2025åˆ†æ

---

### 1.4 ç‰©å€™æ•°æ®ï¼ˆGPPç‰©å€™ - å·²è®¡ç®—ï¼‰

**è·¯å¾„**: `I:\F\Data4\Phenology_Output_1\GPP_phenology`

**æ–‡ä»¶æ ¼å¼**: ï¼ˆæ³¨æ„ï¼šç‰©å€™ä»£ç è¾“å‡ºä¸ºå°å†™ï¼‰

| å˜é‡ | æ–‡ä»¶åæ ¼å¼ | è¯´æ˜ |
|------|-----------|------|
| **SOS** | `sos_gpp_{year}.tif` | æ˜¥å­£ç‰©å€™å¼€å§‹ï¼ˆDOYï¼‰ |
| **POS** | `pos_doy_gpp_{year}.tif` | ç”Ÿé•¿å­£å³°å€¼ï¼ˆDOYï¼‰ |
| **EOS** | `eos_gpp_{year}.tif` | ç§‹å­£ç‰©å€™ç»“æŸï¼ˆDOYï¼‰ |
| POSå€¼ | `pos_value_gpp_{year}.tif` | å³°å€¼GPPæ•°å€¼ |
| è´¨é‡ | `quality_flags_gpp_{year}.tif` | è´¨é‡æ ‡è®° |

**ç¤ºä¾‹**:
- `sos_gpp_2000.tif`
- `pos_doy_gpp_2000.tif`
- `eos_gpp_2000.tif`

**æ³¨æ„**:
- âœ… ä»£ç å·²é…ç½®ä¸ºä½¿ç”¨GPPç‰©å€™ï¼ˆä¼˜å…ˆé€‰æ‹©ï¼‰
- ğŸ“ æ–‡ä»¶åä¸ºå°å†™ï¼ˆ`sos_gpp`ä¸æ˜¯`SOS_gpp`ï¼‰
- ğŸ“ POSæ–‡ä»¶ä¸º`pos_doy_gpp`ï¼ˆä¸æ˜¯`pos_gpp`ï¼‰

---

## 2. ç‰©å€™ä»£ç å€¼å¾—å€Ÿé‰´çš„ç‰¹æ€§

### 2.1 å‚æ•°åŒ–é…ç½®ç³»ç»Ÿ â­â­â­â­â­

**ä»£ç ä½ç½®**: `DataTypeConfig` ç±»

**ä¼˜ç‚¹**:
```python
# ç‰©å€™ä»£ç ä¸ºä¸åŒæ•°æ®ç±»å‹å®šä¹‰äº†ä¸åŒçš„å‚æ•°
CONFIGS = {
    'gpp': {
        'value_min': 0.0,
        'value_max': 25.0,
        'min_range': 0.50,
        'peak_time_min': 100,
        'peak_time_max': 250,
        # ...
    },
    't': {
        'value_min': 0.0,
        'value_max': 8.0,
        # ...
    }
}
```

**å»ºè®®å€Ÿé‰´**:
- åœ¨Wang2025ä»£ç ä¸­å¯ä»¥ä¸ºä¸åŒæ¤è¢«ç±»å‹å®šä¹‰å‚æ•°
- ä¾‹å¦‚ï¼šENF vs DBFçš„TRcèŒƒå›´ã€LSPèŒƒå›´ä¸åŒ

### 2.2 è´¨é‡æ§åˆ¶ç³»ç»Ÿ â­â­â­â­â­

**ç‰©å€™ä»£ç çš„7é¡¹ç¡¬æ€§æ ‡å‡†**:

1. æ•°æ®å®Œæ•´æ€§æ£€æŸ¥ï¼ˆâ‰¥70%æœ‰æ•ˆæ•°æ®ï¼‰
2. å˜å¼‚æ€§æ£€æŸ¥ï¼ˆæ’é™¤å¼‚å¸¸å€¼ï¼‰
3. å³°å€¼æ—¶é—´åˆç†æ€§ï¼ˆDOY 100-250ï¼‰
4. æ˜¥å­£ä¸Šå‡è¶‹åŠ¿æ£€æµ‹
5. ç§‹å­£ä¸‹é™è¶‹åŠ¿æ£€æµ‹
6. å¹³æ»‘æ€§æ£€æŸ¥ï¼ˆç›¸å¯¹å˜åŒ–ç‡ï¼‰
7. æ‹Ÿåˆè´¨é‡æ£€éªŒï¼ˆRMSEã€RÂ²ï¼‰

**è´¨é‡æ ‡è®°è¾“å‡º**: `quality_flags_gpp_{year}.tif`
- `0`: é€šè¿‡æ‰€æœ‰æ£€æŸ¥
- `1-7`: å¯¹åº”å¤±è´¥çš„æ£€æŸ¥é¡¹

**å»ºè®®å€Ÿé‰´**:
- Wang2025åˆ†æä¸­å¯æ·»åŠ TRcè´¨é‡æ£€æŸ¥
- è¿‡æ»¤æ˜æ˜¾å¼‚å¸¸çš„åƒå…ƒï¼ˆå¦‚TRc > 800mmï¼‰
- è®°å½•è´¨é‡æ ‡è®°ä¾¿äºåç»­åˆ†æ

### 2.3 numbaåŠ é€Ÿ â­â­â­â­

**ä»£ç ç¤ºä¾‹**:
```python
@njit
def process_pixel_fast(y, doy, ...):
    # é€åƒå…ƒå¤„ç†é€»è¾‘
    pass
```

**æ€§èƒ½æå‡**: 10-100å€åŠ é€Ÿ

**å»ºè®®å€Ÿé‰´**:
- åœ¨Senè¶‹åŠ¿è®¡ç®—ä¸­ä½¿ç”¨
- åœ¨æ»‘åŠ¨çª—å£åˆ†æä¸­ä½¿ç”¨

### 2.4 åˆ†å—+å¹¶è¡Œå¤„ç† â­â­â­â­â­

**ç‰©å€™ä»£ç ç­–ç•¥**:
```python
chunk_size = 50_000  # æ¯å—50000åƒå…ƒ
nwrk = 4            # 4ä¸ªè¿›ç¨‹

with Pool(processes=nwrk) as pool:
    results = pool.starmap(process_chunk, tasks)
```

**ä¼˜ç‚¹**:
- å†…å­˜å¯æ§
- å……åˆ†åˆ©ç”¨å¤šæ ¸CPU
- æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆtqdmï¼‰

**Wang2025ä»£ç å·²é‡‡ç”¨**: âœ…

### 2.5 çœŸå®DOYæ˜ å°„è¡¨ â­â­â­

**é—®é¢˜**: NDVIåŠæœˆæ•°æ®çš„DOYä¸ç²¾ç¡®

**ç‰©å€™ä»£ç è§£å†³æ–¹æ¡ˆ**:
```python
HALFMONTH_DOY_MAP = {
    (1, 'a'): 8,    # 1æœˆä¸ŠåŠæœˆ â†’ DOY 8ï¼ˆå®é™…ä¸­ç‚¹ï¼‰
    (1, 'b'): 24,   # 1æœˆä¸‹åŠæœˆ â†’ DOY 24
    # ...
}
```

**åŸºäº**: NCæ–‡ä»¶timeåæ ‡çš„å®é™…ä¸­ç‚¹æ—¥æœŸ

**å»ºè®®å€Ÿé‰´**:
- å¦‚æœä½¿ç”¨NDVIæ•°æ®ï¼Œé‡‡ç”¨çœŸå®æ˜ å°„
- æ–‡æ¡£ä¸­å¼•ç”¨æ­¤æ–¹æ³•

### 2.6 åŠ¨æ€è¾¹ç•Œä¼˜åŒ– â­â­â­

**ä»£ç ç‰‡æ®µ**:
```python
if config['bounds_dynamic']:
    # æ ¹æ®å®é™…æ•°æ®èŒƒå›´åŠ¨æ€è°ƒæ•´æ‹Ÿåˆè¾¹ç•Œ
    data_mean = np.mean(valid_data)
    data_range = np.max(valid_data) - np.min(valid_data)
    bounds_lower[0] = data_mean - 2 * data_range
    bounds_upper[0] = data_mean + 2 * data_range
```

**ä¼˜ç‚¹**: æé«˜æ‹ŸåˆæˆåŠŸç‡

**å»ºè®®å€Ÿé‰´**:
- åœ¨å½’å› åˆ†æå›å½’æ—¶ä½¿ç”¨
- æ ¹æ®æ•°æ®åˆ†å¸ƒè‡ªé€‚åº”è°ƒæ•´é˜ˆå€¼

---

## 3. å¦‚ä½•åˆ‡æ¢æ•°æ®

### 3.1 åˆ‡æ¢åˆ°Tç‰©å€™ï¼ˆå¯¹æ¯”åˆ†æï¼‰

**æ­¥éª¤**:

1. ç¼–è¾‘ `config.py`ï¼ˆç¬¬34è¡Œï¼‰:
```python
# å½“å‰ï¼ˆGPPç‰©å€™ï¼‰
PHENO_DIR = ROOT / "Phenology_Output_1" / "GPP_phenology"

# æ”¹ä¸ºï¼ˆTç‰©å€™ï¼‰
PHENO_DIR = ROOT / "Phenology_Output_1" / "T_phenology"
```

2. æ›´æ–°ç‰©å€™æ–‡ä»¶å‘½åï¼ˆç¬¬106è¡Œï¼‰:
```python
PHENO_FILE_FORMAT = {
    'SOS': 'sos_t_{year}.tif',      # gpp â†’ t
    'POS': 'pos_doy_t_{year}.tif',
    'EOS': 'eos_t_{year}.tif',
}
```

3. æ›´æ–°æ‰€æœ‰æ¨¡å—ä¸­çš„æ–‡ä»¶å:

**è‡ªåŠ¨æ‰¹é‡æ›¿æ¢**:
```bash
cd /mnt/d/claude-project/Wang2025_Replication

# Linux/WSL
sed -i 's/sos_gpp_/sos_t_/g' *.py
sed -i 's/pos_doy_gpp_/pos_doy_t_/g' *.py
sed -i 's/eos_gpp_/eos_t_/g' *.py

# Windows PowerShell
(Get-Content *.py) -replace 'sos_gpp_', 'sos_t_' | Set-Content *.py
(Get-Content *.py) -replace 'pos_doy_gpp_', 'pos_doy_t_' | Set-Content *.py
```

4. é‡æ–°è¿è¡Œåˆ†æ:
```bash
python 00_data_preparation.py  # æ£€æŸ¥Tç‰©å€™å¯ç”¨æ€§
python 02_TRc_calculation.py   # é‡æ–°è®¡ç®—TRcï¼ˆä½¿ç”¨Tç‰©å€™çª—å£ï¼‰
python 03_decomposition_original.py
```

### 3.2 åˆ‡æ¢åœŸå£¤æ°´åˆ†æ•°æ®

**ä»æ·±å±‚ï¼ˆSMrzï¼‰åˆ‡æ¢åˆ°è¡¨å±‚ï¼ˆSMsï¼‰**:

ç¼–è¾‘ `config.py` ç¬¬21è¡Œ:
```python
# å½“å‰ï¼ˆæ·±å±‚ - æ¨èï¼‰
SM_DAILY_DIR = GLEAM_ROOT / "SMrz" / "SMrz_Daily"

# æ”¹ä¸ºï¼ˆè¡¨å±‚ - å¤‡é€‰ï¼‰
SM_DAILY_DIR = GLEAM_ROOT / "SMs" / "SMs_Daily"
```

åŒæ—¶æ›´æ–°æ–‡ä»¶æ ¼å¼ï¼ˆç¬¬96è¡Œï¼‰:
```python
# æ”¹ä¸º
SM_FILE_FORMAT = "SMs_{year}{month:02d}.tif"  # SMrz â†’ SMs
```

### 3.3 åˆ‡æ¢åˆ°å¦ä¸€ç»„TRæ•°æ®

å¦‚æœæ‚¨æœ‰å…¶ä»–TRæ•°æ®æº:

1. ç¼–è¾‘ `config.py` ç¬¬18è¡Œ:
```python
# å½“å‰ï¼ˆERA5-Landè’¸è…¾ï¼‰
TR_DAILY_DIR = ROOT / "Meteorological Data" / "ERA5_Land" / "ET_components" / "ET_transp" / "ET_transp_Daily" / "ET_transp_Daily_2"

# æ”¹ä¸ºæ‚¨çš„å…¶ä»–æ•°æ®
TR_DAILY_DIR = ROOT / "Your_TR_Data_Path"
```

2. æ›´æ–°æ–‡ä»¶å‘½åæ ¼å¼ï¼ˆç¬¬90-91è¡Œï¼‰:
```python
TR_FILE_PREFIX = "Your_TR_prefix_"
TR_FILE_FORMAT = "Your_TR_prefix_{date}.tif"
```

3. æ›´æ–° `get_TR_file_path()` å‡½æ•°ï¼ˆç¬¬178è¡Œï¼‰:
```python
def get_TR_file_path(date_obj):
    yyyymmdd = date_obj.strftime("%Y%m%d")
    file_path = TR_DAILY_DIR / f"Your_TR_prefix_{yyyymmdd}.tif"
    return file_path if file_path.exists() else None
```

### 3.4 GPP vs T å¯¹æ¯”åˆ†æå·¥ä½œæµç¨‹

**å»ºè®®æµç¨‹**:

```
ç¬¬ä¸€è½®ï¼šGPPç‰©å€™ + ERA5-Land TR
â”œâ”€â”€ é…ç½®ï¼šPHENO_DIR = GPP_phenology
â”œâ”€â”€ è¿è¡Œï¼š00 â†’ 02 â†’ 03 â†’ 05 â†’ 07
â””â”€â”€ è¾“å‡ºï¼šWang2025_Analysis/Decomposition/

ç¬¬äºŒè½®ï¼šTç‰©å€™ + ERA5-Land TRï¼ˆå¯¹æ¯”ï¼‰
â”œâ”€â”€ é…ç½®ï¼šPHENO_DIR = T_phenology
â”œâ”€â”€ é‡å‘½åè¾“å‡ºç›®å½•ï¼šDecomposition â†’ Decomposition_GPP_pheno
â”œâ”€â”€ è¿è¡Œï¼š02 â†’ 03 â†’ 05 â†’ 07
â”œâ”€â”€ è¾“å‡ºï¼šWang2025_Analysis/Decomposition/ (Tç‰©å€™ç»“æœ)
â””â”€â”€ é‡å‘½åï¼šDecomposition â†’ Decomposition_T_pheno

å¯¹æ¯”åˆ†æï¼š
â”œâ”€â”€ è¯»å–ï¼šDecomposition_GPP_pheno å’Œ Decomposition_T_pheno
â”œâ”€â”€ è®¡ç®—å·®å¼‚ï¼šTRc_diff, TRpheno_diff, TRproduct_diff
â”œâ”€â”€ ç»˜åˆ¶å¯¹æ¯”å›¾
â””â”€â”€ ç»Ÿè®¡å·®å¼‚çš„ç©ºé—´åˆ†å¸ƒ
```

**å¯¹æ¯”è„šæœ¬ç¤ºä¾‹** (åˆ›å»ºæ–°æ–‡ä»¶ `compare_pheno_types.py`):
```python
import numpy as np
import rasterio

# è¯»å–GPPç‰©å€™ç»“æœ
with rasterio.open('Decomposition_GPP_pheno/TRc_av.tif') as src:
    trc_gpp = src.read(1)

# è¯»å–Tç‰©å€™ç»“æœ
with rasterio.open('Decomposition_T_pheno/TRc_av.tif') as src:
    trc_t = src.read(1)

# è®¡ç®—å·®å¼‚
diff = trc_gpp - trc_t
print(f"TRcå·®å¼‚å‡å€¼: {np.nanmean(diff):.2f} mm")
print(f"TRcå·®å¼‚æ ‡å‡†å·®: {np.nanstd(diff):.2f} mm")
```

---

## 4. æ•°æ®æ£€æŸ¥æ¸…å•

### è¿è¡Œå‰æ£€æŸ¥

```bash
# 1. æ£€æŸ¥é…ç½®
python config.py

# 2. è¿è¡Œæ•°æ®å‡†å¤‡ï¼ˆä¼šè‡ªåŠ¨æ£€æŸ¥æ•°æ®å¯ç”¨æ€§ï¼‰
python 00_data_preparation.py
```

**é¢„æœŸè¾“å‡º**:
```
ç‰©å€™æ•°æ® (SOS/POS/EOS):
    1982: âœ“
    1983: âœ“
    ...
    2018: âœ“

TRæ•°æ® (æ¯å¹´1æœˆ15æ—¥æŠ½æ · - ERA5-Land):
    1982: âœ“ (ERA5L_ET_transp_Daily_mm_19820115.tif)
    ...

æ€»ç»“:
    ç‰©å€™æ•°æ®: 37/37 å¹´ä»½å¯ç”¨
    TRæ•°æ®:   37/37 å¹´ä»½å¯ç”¨
```

å¦‚æœå‡ºç°ç¼ºå¤±ï¼Œæ£€æŸ¥ï¼š
1. è·¯å¾„æ˜¯å¦æ­£ç¡®
2. æ–‡ä»¶å‘½åæ˜¯å¦åŒ¹é…
3. æ–‡ä»¶æ˜¯å¦å­˜åœ¨

---

## 5. å¸¸è§é—®é¢˜è§£ç­”

### Q1: ä¸ºä»€ä¹ˆç‰©å€™æ–‡ä»¶åæ˜¯å°å†™ï¼Ÿ

**A**: æ‚¨çš„ç‰©å€™ä»£ç è¾“å‡ºæ ¼å¼ä¸ºå°å†™ï¼ˆ`sos_gpp`ï¼‰ï¼Œè¿™æ˜¯ä»£ç è§„èŒƒã€‚Wang2025ä»£ç å·²é€‚é…ã€‚

### Q2: SMrzæ˜¯æœˆå°ºåº¦æ•°æ®ï¼Œå¦‚ä½•ç”¨äºæ—¥å°ºåº¦åˆ†æï¼Ÿ

**A**:
- **æ–¹æ³•1ï¼ˆæ¨èï¼‰**: åœ¨å½’å› åˆ†æä¸­ä½¿ç”¨æœˆå°ºåº¦SMå³å¯ï¼ˆè¶‹åŠ¿åˆ†æä¸éœ€è¦é€æ—¥ï¼‰
- **æ–¹æ³•2**: å¦‚éœ€æ—¥å°ºåº¦ï¼Œå¯çº¿æ€§æ’å€¼åˆ°æ—¥

### Q3: å¦‚ä½•ç¡®è®¤æ•°æ®ç‰ˆæœ¬ä¸€è‡´ï¼Ÿ

**A**: ç‰©å€™ä»£ç ä½¿ç”¨çš„æ•°æ®ï¼š
- TR: ERA5-Land (ET_transp_Daily_2)
- GPP: GLASS_GPP (GLASS_GPP_8days_1)

Wang2025ä»£ç ä½¿ç”¨ï¼š
- TR: âœ… åŒä¸€æ•°æ®æº
- GPPç‰©å€™: âœ… åŸºäºåŒä¸€GPPæ•°æ®æå–

### Q4: POSä¸ºä»€ä¹ˆæ˜¯pos_doyè€Œä¸æ˜¯posï¼Ÿ

**A**: ç‰©å€™ä»£ç è¾“å‡ºä¸¤ä¸ªPOSç›¸å…³æ–‡ä»¶ï¼š
- `pos_doy_gpp_{year}.tif`: å³°å€¼çš„DOYï¼ˆç”¨äºè®¡ç®—LSPï¼‰
- `pos_value_gpp_{year}.tif`: å³°å€¼çš„GPPæ•°å€¼

Wang2025åˆ†æä½¿ç”¨`pos_doy`ï¼ˆDOYï¼‰ã€‚

### Q5: å¦‚ä½•éªŒè¯æ•°æ®è¯»å–æ­£ç¡®ï¼Ÿ

**A**:
```python
# æµ‹è¯•è„šæœ¬
import rasterio
import numpy as np

# è¯»å–ç‰©å€™
with rasterio.open('I:/F/Data4/Phenology_Output_1/GPP_phenology/sos_gpp_2000.tif') as src:
    sos = src.read(1)
    print(f"SOSèŒƒå›´: {np.min(sos[sos!=-9999]):.0f} - {np.max(sos[sos!=-9999]):.0f} DOY")

# è¯»å–TR
with rasterio.open('I:/F/Data4/Meteorological Data/ERA5_Land/ET_components/ET_transp/ET_transp_Daily/ET_transp_Daily_2/ERA5L_ET_transp_Daily_mm_20000615.tif') as src:
    tr = src.read(1)
    print(f"TRèŒƒå›´: {np.min(tr[tr!=-9999]):.2f} - {np.max(tr[tr!=-9999]):.2f} mm/day")
```

**é¢„æœŸè¾“å‡º**:
```
SOSèŒƒå›´: 60 - 150 DOY  â† åˆç†èŒƒå›´
TRèŒƒå›´: 0.1 - 6.5 mm/day  â† åˆç†èŒƒå›´
```

---

## 6. ä¿®æ”¹æ€»ç»“

### å·²ä¿®æ”¹çš„æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|---------|
| **config.py** | âœ… æ›´æ–°æ‰€æœ‰æ•°æ®è·¯å¾„å’Œæ–‡ä»¶æ ¼å¼ |
| **00_data_preparation.py** | âœ… ä¿®å¤printè­¦å‘Šï¼Œæ›´æ–°ç‰©å€™æ–‡ä»¶æ£€æŸ¥ |
| **02_TRc_calculation.py** | âœ… æ›´æ–°TRæ–‡ä»¶è·¯å¾„ï¼Œæ›´æ–°ç‰©å€™æ–‡ä»¶å |
| **03_decomposition_original.py** | âœ… æ›´æ–°ç‰©å€™æ–‡ä»¶è¯»å– |

### æ— éœ€ä¿®æ”¹çš„æ–‡ä»¶

âœ… ä»¥ä¸‹æ–‡ä»¶ä¼šè‡ªåŠ¨ä½¿ç”¨config.pyé…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨ä¿®æ”¹ï¼š
- 01_phenology_extraction.pyï¼ˆæš‚ä¸ä½¿ç”¨ï¼Œå·²æœ‰ç‰©å€™æ•°æ®ï¼‰
- 04_decomposition_improved.py
- 05_statistical_analysis.py
- 06_SEM_analysis.R
- 07_plotting_functions.py

---

## 7. ä¸‹ä¸€æ­¥æ“ä½œ

### ç«‹å³å¼€å§‹

```bash
cd /mnt/d/claude-project/Wang2025_Replication

# Step 1: éªŒè¯é…ç½®
python config.py

# Step 2: æ•°æ®å‡†å¤‡
python 00_data_preparation.py

# Step 3: å¦‚æœæ•°æ®æ£€æŸ¥é€šè¿‡ï¼Œå¼€å§‹åˆ†æ
python 00_master_pipeline.py --skip 1  # è·³è¿‡Module 01ï¼ˆå·²æœ‰ç‰©å€™ï¼‰
```

### é¢„è®¡è¿è¡Œæ—¶é—´

- 00_data_preparation: ~5åˆ†é’Ÿ
- 02_TRc_calculation: ~4å°æ—¶ï¼ˆ37å¹´ Ã— 365å¤©ï¼‰
- 03_decomposition_original: ~1å°æ—¶
- 05_statistical_analysis: ~3å°æ—¶
- 07_plotting: ~20åˆ†é’Ÿ

**æ€»è®¡**: ~8-10å°æ—¶

---

**ç¥åˆ†æé¡ºåˆ©ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ•°æ®è·¯å¾„æ˜¯å¦æ­£ç¡®
2. æ–‡ä»¶å‘½åæ˜¯å¦åŒ¹é…
3. ç‰©å€™æ•°æ®æ˜¯å¦å®Œæ•´ï¼ˆ1982-2018å…¨è¦†ç›–ï¼‰
